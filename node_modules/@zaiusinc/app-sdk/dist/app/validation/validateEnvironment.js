"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateEnvironment = validateEnvironment;
function validateEnvironment(runtime) {
    const errors = [];
    const nameCounts = {};
    (runtime.manifest.environment || []).forEach((name) => {
        if (!name.match(/^APP_ENV_[A-Z0-9_]+$/)) {
            errors.push(`Invalid app.yml: environment${name.match(/\s/) ? `["${name}"]` : `.${name}`} ` +
                'must be prefixed with "APP_ENV_" and consist of only uppercase alphanumeric and underscores');
        }
        nameCounts[name] = (nameCounts[name] || 0) + 1;
    });
    Object.keys(nameCounts).forEach((name) => {
        if (nameCounts[name] > 1) {
            errors.push(`Invalid app.yml: environment${name.match(/\s/) ? `["${name}"]` : `.${name}`} is listed more than once`);
        }
    });
    return errors;
}
//# sourceMappingURL=validateEnvironment.js.map