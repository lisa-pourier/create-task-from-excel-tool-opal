"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateLifecycle = validateLifecycle;
const logging_1 = require("../../logging");
const Lifecycle_1 = require("../Lifecycle");
async function validateLifecycle(runtime) {
    const errors = [];
    // Make sure the lifecycle exists and is implemented
    let lcClass = null;
    let errorMessage = null;
    try {
        lcClass = await runtime.getLifecycleClass();
    }
    catch (e) {
        errorMessage = e;
        logging_1.logger.error(e);
    }
    if (!lcClass) {
        errors.push(`Error loading Lifecycle implementation. ${errorMessage}`);
    }
    else if (!(lcClass.prototype instanceof Lifecycle_1.Lifecycle)) {
        errors.push('Lifecycle implementation does not extend App.Lifecycle');
    }
    else {
        for (const method of Lifecycle_1.LIFECYCLE_REQUIRED_METHODS) {
            if (typeof lcClass.prototype[method] !== 'function') {
                errors.push(`Lifecycle implementation is missing the ${method} method`);
            }
        }
    }
    return errors;
}
//# sourceMappingURL=validateLifecycle.js.map