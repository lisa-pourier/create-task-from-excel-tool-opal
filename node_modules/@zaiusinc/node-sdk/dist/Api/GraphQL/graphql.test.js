"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ApiV3_1 = require("../lib/ApiV3");
const graphql_1 = require("./graphql");
describe('graphql', () => {
    const mockConfiguration = {
        apiBasePath: 'https://api.zaius.com/v3/',
        apiKey: 'api-key'
    };
    const apiV3 = new ApiV3_1.ApiV3.API(mockConfiguration);
    let postMock;
    beforeEach(() => {
        postMock = jest.spyOn(apiV3, 'post').mockReturnValue(Promise.resolve({}));
    });
    it('sends a query to /graphql', async () => {
        const query = '{}';
        postMock.mockReturnValue({
            success: true,
            data: {
                data: 'result data'
            }
        });
        const result = await (0, graphql_1.graphql)(apiV3, query);
        expect(postMock).toHaveBeenCalledWith('/graphql', { query });
        expect(result).toEqual({
            success: true,
            data: 'result data'
        });
    });
    it('sends a query with variables to /graphql', async () => {
        const query = '{}';
        const variables = {};
        postMock.mockReturnValue({ data: { data: 'result data' } });
        await (0, graphql_1.graphql)(apiV3, query, variables);
        expect(postMock).toHaveBeenCalledWith('/graphql', { query, variables });
    });
});
//# sourceMappingURL=graphql.test.js.map